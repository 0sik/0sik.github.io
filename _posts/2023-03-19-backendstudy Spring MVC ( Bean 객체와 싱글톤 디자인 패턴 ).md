---
layout: single
title: "Spring MVC"
toc: true
toc_sticky: true
toc_label: "목차"
categories: backendstudy
toc_icon: "bars"
tags: [backendstudy]
---

📘Spring MVC ( Bean 객체와 싱글톤 디자인 패턴 )

# MVC란
- Model-View-Controller의 약자이며, 어플리케이션을 구성하는 요소를 역할에 따라 세가지 모듈로 나누어 구분한 패턴이다.

## Model
- 어플리케이션의 데이터, 모든 데이터 정보를 가공하여 가지고 있는 컴포넌트

> 컴포넌트란 여러개의 프로그램 함수들을 모아 하나의 특정한 기능을 수행할 수 있도록 구성한 작은 기능적 단위를 말한다

-사용자가 이용하려는 모든 데이터를 가지고 있어야하며, View또는 Controller에 대해 어떠한 정보도 알 수 없어야 한다

## View
- 시각적인 UI요소를 자칭하는 용어이다
- model이 가지고 있는 데이터를 저장하면 안된다
- model이나 controller에 대한 정보를 알면 안되며 단순히 표시를 해주는 역할을 가지고있다.

## Controller
- Model과 View를 연결해주는 역할
- Model또는 View에 대한 정보를 알아야 한다

# Spring MVC
- 개별 컨트롤러 클래스는 핸들러라고도 하며, DI를 통해 생성해둔 Bean을 통해 비즈니스 로직 처리 결과를 Model에 담아 다시 프론트 컨트롤러로 보낸다. 프론트 컨트롤러는 받은 Model을 알맞은 View 템플릿으로 전달하여 반영시키고, 최종적으로 클라이언트로 보낼 화면을 응답 결과로 전송한다

# 스프링 컨테이너란?
- 자바 객체의 생명 주기를 관리하며, 생성된 자바 객체들에게 추가적인 기능을 제공하는 역할을 한다
- Ioc,DI의 원리가 스프링 컨테이너에 적용된다
- 개발자는 new 연산자, 인터페이스 호출, 팩토리 호출 방식으로 객체를 생성하고 소멸 시킬수 있는데, 스프링 컨테이너가 이 역할을 대신해 줍니다. 
- 제어 흐름을 외부에서 관리하는 것
- 객체들 간의 의존 관계를 스프링 컨테이너가 런타임 과정에서 알아서 만들어 준다
- 여기서 말하는 자바 객체를 스프링에서는 Bean이라고 부른다

# Bean 객체
- Spring에서는 POJO(Plain old java Object)를 beans라고 부른다
- Spring IoC컨테이너가 관리하는 자바 객체를 빈(Bean)이라고 부른다

> 제어의 역전 IOC의 
> 객체의 생성을 특별한 관리 위임 주체에게 맡긴다. 이 경우 사용자는 객체를 직접 생성하지 않고 , 객체의 생명주기를 컨트롤하는 주체는 다른주체가 된다.

- Spring에서는 직접 new를 이용하여 생성한 객체가 아니라, Spring에 의하여 관리당하는 자바 객체를 사용합니다.
- 이렇게 Spring에 의하여 생성되고 관리되는 자바 객체를 Bean이라고 한다.
- Spring Bean 을 얻기 위하여 ApplicationContext.getBean()와 같은 메소드를 이용한다

# 싱글톤 패턴
- 어플리케이션이 시작될 대 어떤 클래스가 최초 한번만 메모리를 할당하고 그 메모리에 인스턴스를 만들어 사용
- 객체의 인스턴스가 오직 1개만 생성되는 패턴 
- 인스턴스가 필요할 때 , 똑같은 인스턴스를 만들지 않고 기존의 인스턴스를 활용하는 것!
- 생성자가 여러번 호출되도 , 실제로 생성되는 객체는 하나이며 최초로 생성된 이후에 호출된 생성자는 이미 생성한 객체를 반환시키도록 만드는 것
- java에서 생성자를 private으로 선언해 다른 곳에서 생성하지 못하도록 만들고, getinstance()메소드를 통해 받아서 사용하도록 구현

## 싱글톤 패턴의 장점
- 최초 한번의 new연산자를 통해서 고정된 메모리 영역을 사용하기 때문에 추후 해당 객체에 접근할 때 메모리 낭비 방지 할 수 있다.
- 이미 생성된 인스턴스를 활용하니 속도 측면에서도 이점 이 있다
- 다른 클래스 간에 데이터 공유가 쉽다
- 싱글톤 인스턴스가 전역으로 사용되는 인스턴스이기 때문에 다른 클래스의 인스턴스들이 접근하여 사용할 수 있다
- 인스턴스가 절대적으로 한 개만 존재하는 것을 보증하고 싶을 경우 사용한다

## 싱글톤 패턴의 단점
- 멀티쓰레드 환경에서 동기화 처리를 안하면 인스턴스가 2개가 생성 될 수 있는 가능성이 생기게 된다

> 개방 폐쇄의 원칙(OCP)이란 기존의 코드를 변경하지 않으면서, 기능을 추가할 수 있도록 설계가 되어야 한다는 원칙을 말한다. 

- 싱글톤 인스턴스가 혼자 너무 많은 일을 하거나, 많은 데이터를 공유시키면 다른 클래스들 간의 결합도가 높아지게 되는데 , 이때 개방-폐쇄 원칙이 위배된다
- 결합도가 높아지게 되면, 유지보수가 힘들고 테스트도 원활하게 진행할 수 없는 문제점이 발생한다.
- 테스트 하기 어렵다, 싱글톤 인스턴스는 자원을 공유하고 있기 때문에 테스트가 결정적으로 격리된 환경에서 수행되려면 매번 인스턴스의 상태를 초기화 시켜주어야 한다. 그렇지 않으면 어플리케이션 전역에서 상태를 공유하기 때문에 테스트가 온전하게 수행되지 못한다.

# Reference
https://ss-o.tistory.com/160
https://steady-coding.tistory.com/594
https://melonicedlatte.com/2021/07/11/232800.html
https://tecoble.techcourse.co.kr/post/2020-11-07-singleton/
https://devmoony.tistory.com/43
https://gyoogle.dev/blog/design-pattern/Singleton%20Pattern.htmlx