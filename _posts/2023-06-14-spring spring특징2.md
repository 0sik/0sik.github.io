---
layout: single
title: "spring νΉμ§•2"
toc: true
toc_sticky: true
toc_label: "λ©μ°¨"
categories: spring
toc_icon: "bars"
tags: [spring]
---

π“ spring νΉμ§•2

## λ§μ΄λ°”ν‹°μ¤

- μ¤ν”„λ§ ν”„λ μ„μ›ν¬λ‘ λ§μ΄λ°”ν‹°μ¤ ν”„λ μ„μ›ν¬ λΉ μμ΅΄κ΄€κ³„ μ„¤μ •μ •λ³΄λ¥Ό μ„¤λ…
    1. μ»¤λ„¥μ… ν’€ μ§€μ›ν•λ” DataSourceλΉ λ“±λ΅
    2. μ¤ν”„λ§μ νΈλμ­μ… κ΄€λ¦¬μ λΉ λ“±λ΅
    3. λ§μ΄λ°”ν‹°μ¤μ sqlSessionFactory λΉ λ“±λ΅
    4. Mybatis-springμ sqlSessionTemplate λΉ λ“±λ΅ν•΄μ„ μμ΅΄κ΄€κ³„ μ„±λ¦½ν•λ‹¤.

- SQL μ‚½μ… κ°’μ μ—°κ³„ λ°©λ²•
    1. νλΌλ―Έν„°κ°€ μλ°” λΉμ¦ κ°μ²΄μΌ κ²½μ°
        
        sqlSession.insert(namespace+β€.insertβ€,vo);
        
        <insert id = β€insertβ€>
        
        insert into student(id,passwd) values(#{id},#{passwd})
        
        </insert>
        
    2. νλΌλ―Έν„°κ°€ ν•λ‚μ΄κ³ , κΈ°λ³Έ μλ£ν•μ΄λ‚ λ¬ΈμμΌ κ²½μ° κ°’μ„ κ·Έλ€λ΅ μ „λ‹¬
        
        StudentVO vo = sqlsession.selectOne(namespace+β€selectByidβ€,id);
        
        <select id = β€selectByidβ€ resultType=β€org.tukorea.myweb.domain.StudentVOβ€>
        
        select*from student where id = #{id}
        
        </select>
        
    3. νλΌλ―Έν„°κ°€ MapμΌ κ²½μ° #{num}μ€ Mapκ°μ²΄μ ν‚¤ κ°’μ΄ β€numβ€™μΈκ°’μ„ μ°Ύλ”λ‹¤
    
    <![CDATA[select*from student]]> μ•μ—μλ” νΉμλ¬Έμ μ „λ¶€ λ¬Έμλ΅ λ°›λ” CDATA
    
- daoκ°μ²΄ν•κ³  λ©”νΌνμΌμ sqlν•κ³  μ–΄λ–»κ² μ—°λ™ ν•λ”μ§€ μ„¤λ…
    
    sqlμ‹¤ν–‰ κ²°κ³Όμ™€ λ°ν™κ°’μ΄ λλ” κ°μ²΄ κ°„ λ§¤ν•‘μ€ λ§μ΄λ°”ν‹°μ¤μ— μν•΄ μλ™μΌλ΅ μ΄λ£¨μ–΄μ§
    
- aopμ •μ
    
    κ΄€μ μ§€ν–¥ ν”„λ΅κ·Έλλ°μ΄λ‹¤. ν΅λ‹¨ κ΄€μ‹¬μ‚¬λ¥Ό μ¤‘μ‹¬λ¥Ό λ¶„λ¦¬ν•μ—¬ μ„¤κ³„,κ°μ²΄μ§€ν–¥ ν”„λ΅κ·Έλλ°λ³΄λ‹¤ μ™„μ„±λ„ λ†’μΈ ν”„λ΅κ·Έλλ° ν¨λ¬λ‹¤μ„
    
- aopν•κ³  diμ κµ¬ν„ λ©μ  μ°¨μ΄μ 
    
    di : μμ΅΄ κ΄€κ³„ λΉλ“¤μ κ²°ν•©λ„ λ‚®μ¶”κΈ°
    
    aop: ν΅λ‹¨κ΄€μ‹¬μ‚¬ κ°μ²΄μ™€ μ΄μ— μν–¥λ°›λ” κ°μ²΄μ κ²°ν•©λ„ λ‚®μ¶”κΈ°
    
- advice,joinpoint,pointcut κ΄€μ‹¬μ‚¬,ν΅λ‹¨κ΄€μ‹¬μ‚¬, ν΅λ‹¨κ΄€μ‹¬μ‚¬λ¶„λ¦¬, κ΄€μ μ§€ν–¥ν”„λ΅κ·Έλλ° μ©μ–΄ μ„¤λ…
    
    advice : ν΅λ‹¨κ΄€μ‹¬μ‚¬ κµ¬ν„ λ¶€λ¶„
    
    joinpoint: adviceμ μ© κ°€λ¥ν• μ§€μ λ“¤
    
    pointcut : μλ§μ€ joinpointμ¤‘μ—μ„ μ‹¤μ  μ μ©λ  μ§€μ λ“¤
    
    aspect : κ³µν†µ κ΄€μ‹¬μ‚¬μ μ¶”μƒμ  λ…μΉ­
    
    target : ν΅λ‹¨ κ΄€μ‹¬μ‚¬λ¥Ό μ μ© λ°›κ² λλ” λ€μƒμΌλ΅ μ–΄λ“λ°”μ΄μ¤κ°€ μ μ©λλ” κ°μ²΄
    
    weaving : proxyκ°μ²΄λ¥Ό λ§λ“λ” κ³Όμ •
    
    proxy : adviceκ°€ μ μ©λμ—μ„λ• λ§λ“¤μ–΄μ§€λ” κ°μ²΄
    
    κ΄€μ‹¬μ‚¬ : μ• ν”λ¦¬μΌ€μ΄μ… κ°λ° μ„ν• κµ¬ν„ κΈ°λ¥λ“¤
    
    ν΅λ‹¨ κ΄€μ‹¬μ‚¬ : μ—¬λ¬ λ¨λ“μ— κ±Έμ³ κ³µν†µμ μΌλ΅ λ°λ³µμ μΌλ΅ ν•„μ”λ΅ ν•λ” μ²λ¦¬ λ‚΄μ©
    
    ν΅λ‹¨ κ΄€μ‹¬μ‚¬ λ¶„λ¦¬ : ν΅λ‹¨κ΄€μ‹¬μ‚¬λ¥Ό ν•κ³³μΌλ΅ λ¨λ”κ²ƒ
    
    κ΄€μ μ§€ν–¥ ν”„λ΅κ·Έλλ° : ν΅λ‹¨ κ΄€μ‹¬μ‚¬ λ¶„λ¦¬λ¥Ό μ‹¤ν„ν•λ”κ²ƒ
    
- adviceμ ν• μ°¨μ΄μ μ„ λΉ„κµ
    
    before: μ΅°μΈν¬μΈνΈ μ•μ—μ„ μ‹¤ν–‰ν•   μ–΄λ“λ°”μ΄μ¤ 
    
    after: μ΅°μΈν¬μΈνΈ λ’¤μ—μ„ μ‹¤ν–‰ν•  μ–΄λ“λ°”μ΄μ¤
    
    after returning  : μ΅°μΈν¬μΈνΈκ°€ μ™„μ „ν μΆ…λ£λ λ‹¤μμ— μ‹¤ν–‰λλ” μ–΄λ“λ°”μ΄μ¤
    
    around : μ΅°μΈν¬μΈνΈ μ•λ’¤μ—μ„ μ‹¤ν–‰λλ” μ–΄λ“λ°”μ΄μ¤
    
    after throwing : μ΅°μΈν¬μΈνΈμ—μ„ μμ™Έκ°€ λ°μƒν–μ„λ• μ‹¤ν–‰λλ” μ–΄λ“λ°”μ΄μ¤
    
- ν¬μΈνΈμ»· κΈ°μ ν• λ• μ“°λ” ν‘ν„μ‹ μ„¤λ… κ°€λ¥
    
    
    ![α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2023-06-14 α„‹α…©α„α…¥α†« 6.25.03.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/139268ac-0c5f-4d2e-bc37-e547eb6440d0/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-06-14_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_6.25.03.png)
    
    ![α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2023-06-14 α„‹α…©α„α…¥α†« 6.25.11.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b6bf65e4-b93c-4505-a33a-97fec74657b3/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-06-14_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_6.25.11.png)
    
    μ™€μΌλ“ μΉ΄λ“
    
- proxy ν¨ν„΄ μ μ©ν• λ‚΄μ© μ΄ν•΄
    
    μ§μ ‘ μ°Έμ΅°κ°€ μ•„λ‹ κ·Έ κ°μ²΄λ¥Ό λ€ν–‰ ν•λ” κ°μ²΄λ¥Ό ν†µν•΄ λ€μƒ κ°μ²΄μ— μ ‘κ·Όν•λ” λ°©μ‹ , μ¤ν”„λ§ μ»¨ν…μ΄λ„ μ΄κΈ°ν™” κ³Όμ •μ—μ„ μ¤ν”„λ§ λΉ κ°μ²΄ λ€ν•­ν•  ν”„λ΅μ‹ κ°μ²΄ μƒμ„±, κ°μ²΄ ν•µμ‹¬ μ½”λ“μ— λ€ν• μν–¥μ—†μ΄ κ°μ²΄μ μ ‘κ·Ό μ „/ν›„ μ— λ€ν• μ¤‘μ” μ²λ¦¬ κ°€λ¥
    

- aop μ„¤μ • μ½”λ“
    
    ![α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2023-06-14 α„‹α…©α„α…¥α†« 6.27.33.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/872fa68d-c3d9-4607-a8ec-06b3a75eb8b5/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-06-14_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_6.27.33.png)
    
- **κΈ°λ³Έμ›μΉ™ 4κ°€μ§€ ACID**
ACID
    - μ›μμ„±(Atomicity)
        - ν• νΈλμ­μ… λ‚΄ λ¨λ“  μ—°μ‚°λ“¤μ΄ μ™„μ „ν μν–‰λκ±°λ‚ μ „ν€ μν–‰λμ§€ μ•μ
    - μΌκ΄€μ„±(Consistency)
        - μ–΄λ–¤ νΈλμ­μ… μν–‰λκΈ° μ „ DBκ°€ μΌκ΄€λ μƒνƒλ¥Ό κ°€μ΅λ‹¤λ©΄ νΈλμ­μ… μν–‰ ν›„μ—λ„
        λ λ‹¤λ¥Έ μΌκ΄€λ μƒνƒλ¥Ό κ°€μ§ (μ μ•½μ΅°κ±΄ λ“±)
    - κ³ λ¦½μ„±(Isolation)
        - ν• νΈλμ­μ…μ΄ λ°μ΄ν„° κ°±μ‹ λ™μ• μ΄ νΈλμ­μ… μ™„λ£ μ „κΉμ§€ λ‹¤λ¥Έ νΈλμ­μ…μ—μ„
        μ΄ λ°μ΄ν„°μ— μ ‘κ·Ό λ¶κ°€
    - μ§€μ†μ„±(Durability)
        - ν• νΈλμ­μ… μ™„λ£λλ©΄ DBμ— λ°μν• μν–‰ κ²°κ³Όλ” μκµ¬μ μ΄μ–΄μ•Ό ν•¨

- **aopλ¥Ό μ΄μ©ν• μ¤ν”„λ§μ—μ„μ νΈλμ­μ… λ°©μ‹μ„ μ„¤λ…ν•μ‹μ¤**
    
    AOPλ΅ μ„λΉ„μ¤μ— νΈλμ­μ… μ²λ¦¬λ¥Ό κµ¬ν„ν• μ–΄λ“λ°”μ΄μ¤ μ μ©ν•¨μΌλ΅μ¨
    μ„λΉ„μ¤ λ‚΄λ¶€ μμ •ν•μ§€ μ•κ³  νΈλμ­μ…μ„ μ²λ¦¬, νΈλμ­μ… μ²λ¦¬λ” νΈλμ­μ… κ΄€λ¦¬μ, νΈλμ­μ… μ–΄λ“λ°”μ΄μ¤ μ‚¬μ©
    
- **μ¤ν”„λ§λ¶€νΈ νΉμ§•**
    
    **λ…λ¦½ μ‹¤ν–‰ν• μ•±μ„ μ κ³µν•λ‹¤, wasκ°€ λ‚΄μ¥λΌμλ‹¤,**  μμ΅΄ κ΄€κ³„ λΌμ΄λΈλ¬λ¦¬ μ΅°ν•© μ κ³µ
    
    - Spring Boot Starter : λ―Έλ¦¬ μ •μν• μμ΅΄ κ΄€κ³„ λΌμ΄λΈλ¬λ¦¬ μ΅°ν•© μ κ³µ
    - spring-boot-starter-web : ν•λ‚μ μμ΅΄ κ΄€κ³„λ¥Ό μ¶”κ°€
    -> Spring MVC, Tomcat, μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…μ— ν•„μ”ν• λΌμ΄λΈλ¬λ¦¬κ°€ ν•¨κ» μ¶”κ°€
    - Spring Boot Starter Parent
        - λΌμ΄λΈλ¬λ¦¬ λ²„μ „ κ°„ μ¶©λ λ° νΈν™ λ¬Έμ  λ°μƒ κ°€λ¥
        -> κ²€μ¦λ μμ΅΄ κ΄€κ³„ λΌμ΄λΈλ¬λ¦¬ μ΅°ν•© μ κ³µ
        
- **μ¤ν”„λ§λ¶€νΈμ–΄ν”λ¦¬μΌ€μ΄μ… μλ―Έ**
    
    @SpringBootApplication
    = @SpringBootConfiguration + @ComponentScan + @EnableAutoConfiguration
    
    - @SpringBootConfiguration : @Configuration κ°™μ€ μλ―Έ
    - @ComponentScan : λ…μ‹ν• ν΄λμ¤ μ°Ύμ•„ μ¤ν”„λ§ λΉμΌλ΅ λ“±λ΅
    - @EnableAutoConfiguration : μ‚¬μ „μ— μ •μν• λΌμ΄λΈλ¬λ¦¬λ“¤μ„ λ€μƒμΌλ΅ μ΅°κ±΄μ΄ λ§μ΅± λ 	κ²½μ° λΉμΌλ΅ λ“±λ΅ν•΄ μ£Όλ” μ• λ…Έν…μ΄μ…
    
- **μ»¨νΈλ΅¤λ¬μ–΄λ“λ°”μ΄μ¤, exceptionhandller μμ™Έμ²λ¦¬**
    
    ![α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2023-06-14 α„‹α…©α„α…¥α†« 6.41.49.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b1f44858-57d6-4867-bdbe-f3b1bf378fe6/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-06-14_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_6.41.49.png)
    

- **μΈν„°μ…‰ν„°ν•κ³  ν•„ν„°μ μ°¨μ΄μ **
    
    μΈν„°μ…‰ν„°λ” μ¤ν”„λ§ μ»¨ν…μ¤νΈλ‚΄μ— μ΅΄μ¬ν•΄μ„ μ¤ν”„λ§ μ»¨ν…μ¤νΈλ‚΄μ— μ ‘κ·Όκ°€λ¥ λ””μ¤ν¨μ²μ„λΈ”λ¦Ώ ν›„μ— μ‹¤ν–‰ ν•„ν„°λ” μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…”λ‚΄μ—μ„ λ™μ‘ν•΄μ„ μ¤ν”„λ§ contextμ ‘κ·Ό μ–΄λ ¤μ›€ λ””μ¤ν¨μ²μ„λΈ”λ¦Ώ μ „μ— μ‹¤ν–‰
    

- **μΈν„°μ…‰ν„°ν•κ³  aopμ μ°¨μ΄μ **
    
    - μΈν„°μ…‰ν„°μ νλΌλ―Έν„°κ°€ HttpServletRequest, HttpServletResponse μ„
    
    - aopλ” JoinPoint, PreceedingJoinPoint λ“±μ νλΌλ―Έν„° ν™μ©ν•λ” λ°©μ‹
    
- **μΈν„°μ…‰ν„° κµ¬ν„ μ„ν•΄μ„λ” μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•΄μ•Ό ν•¨ κ·Έ λ• 3κ°€μ§€ λ©”μ†λ“ μ•μ•„μ•Ό ν•¨**
    
    ![α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2023-06-14 α„‹α…©α„α…¥α†« 6.43.45.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/8b35f6aa-f7e9-43e2-b5cb-0885f0cb1767/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-06-14_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_6.43.45.png)
    
- **κµ¬μ΅°λ¥Ό λ³΄λ©΄ ν”„λ΅μ‹ν•κ³  ν•„ν„°ν•κ³  μ—¬λ¬ μ—°λ™κ΄€κ³„κ°€ μμ–μ•„ ν•„ν„°μ²΄μΈ, ν”„λ΅μ‹, μ‹νλ¦¬ν‹°ν•„ν„° λ“± κ°κ°μ μ—­ν• **
    
    ![α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2023-06-14 α„‹α…©α„α…¥α†« 6.44.42.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/de7d00ff-1abb-4198-99fe-6c840c5da77a/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-06-14_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_6.44.42.png)
    
- **ν•„ν„°μ—μ„ μΈμ¦ μ²λ¦¬ μΈν„°νμ΄μ¤ 2κ°€μ§€ μ—­ν• **
    
    ![α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2023-06-14 α„‹α…©α„α…¥α†« 6.45.03.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1f7f76be-3083-4649-bf23-3fbf6ad8f0be/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-06-14_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_6.45.03.png)
    

- **μ„μ— ν†µν•΄μ„ λ™μ‘λ°©μ‹(κµ¬μ΅°) μ„¤λ…(μ»΄ν¬ν„΄νΈ λ“±)**
    
    Authentication Filterμ„ ν†µν•΄ Managerμ—μ„ μΈμ¦μ²λ¦¬λ¥Ό μν–‰ν•κ³  Providerμ—μ„ μΈμ¦μ²λ¦¬ κΈ°λ¥μ„ μν–‰ν•λ‹¤.
